{
  "kind": "Stateful",
  "definition": {
    "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#",
    "contentVersion": "1.0.0.0",
    "triggers": {
      "pipelinereceive": {
        "type": "Request",
        "kind": "Http"
      }
    },
    "actions": {
      "Disassemble": {
        "type": "Scope",
        "actions": {
          "Flatfiledisassembler": {
            "type": "Foreach",
            "foreach": "@triggerBody()?['items']",
            "actions": {
              "FlatFileDecoding": {
                "type": "FlatFileDecoding",
                "inputs": {
                  "content": "@items('Flatfiledisassembler')?['$content']",
                  "schema": {
                    "source": "LogicApp",
                    "name": "FLAT_FILE_SCHEMA_NAME_HERE"
                  }
                },
                "metadata": {
                  "comment": "// Use 'Flat file decoding' action\n// ACTION REQUIRED:\n// 1. Export flat file schema from BizTalk\n// 2. Upload to Integration Account\n// 3. Select schema in Flat File Decoding action\n// 4. Schema name from property: Aggregator.PipelinesAndSchemas.Invoice"
                },
                "runAfter": {}
              }
            },
            "runtimeConfiguration": {
              "concurrency": {
                "repetitions": 20
              }
            },
            "runAfter": {}
          }
        },
        "runAfter": {}
      }
    },
    "outputs": {}
  }
}