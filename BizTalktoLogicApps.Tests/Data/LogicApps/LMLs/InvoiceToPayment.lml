$version: 1
$input: XML
$output: XML
$sourceSchema: AdvancedShipNotice.xsd
$targetSchema: AdvancedShipNotice.xsd
$sourceNamespaces:
  b: http://schemas.microsoft.com/BizTalk/2003
  cbt: http://CommonDocTemplates.CommonBaseTypes
  ns0: http://CommonDocTemplates.CommonAdvancedShipNotice
  xs: http://www.w3.org/2001/XMLSchema
$targetNamespaces:
  b: http://schemas.microsoft.com/BizTalk/2003
  cbt: http://CommonDocTemplates.CommonBaseTypes
  msdata: urn:schemas-microsoft-com:xml-msdata
  ns0: http://CommonDocTemplates.CommonAdvancedShipNotice
  xs: http://www.w3.org/2001/XMLSchema
msdata:Payment:
  Header:
    PONumber: /ns0:CommonInvoice/InvoiceHeader/@PONumber
    Invoice: /ns0:CommonInvoice/InvoiceHeader/@Number
    ReferenceNumber: /ns0:CommonInvoice/InvoiceHeader/@Type
    DateCreated: current-dateTime()
  Item:
    Quantity: /ns0:CommonInvoice/Item/ItemHeader/@Quantity
    Price: /ns0:CommonInvoice/Item/ItemHeader/@Price
    ExtendedPrice: /ns0:CommonInvoice/Item/ItemHeader/@ExtendedPrice
    Description: position-at(/ns0:CommonInvoice/Item/ItemDescription/@Description, "1")
  Payee:
    Name: /ns0:CommonInvoice/Buyer/Address/@Name
    Address: concat(/ns0:CommonInvoice/Buyer/Address/@Address1, /ns0:CommonInvoice/Buyer/Address/@Address2)
    ContactInfo: /ns0:CommonInvoice/Buyer/ContactInfo/@ContactNumber
  PaymentMethod:
    AccountInfo: custom-function() /* Original code: ///*Uncomment the following code for a sample Inline C# function //that concatenates two inputs. Change the number of parameters of //this function to be equal to the number of inputs connected to this functoid.*/  //public string MyConcat(string param1, string param2) //{ //	return param1+param2; //} public string constant_accpount_info() {   return 'account 1234-1234'; } */
    PaymentDate: current-date()
  PaymentSummary:
    Total: /ns0:CommonInvoice/InvoiceSummary/InvoiceTotal/@Amount
    Terms: /ns0:CommonInvoice/InvoiceTermsOfSale/@DiscountDaysDue
