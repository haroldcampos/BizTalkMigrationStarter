$version: 1
$input: XML
$output: XML
$sourceSchema: 
$targetSchema: CustomerServiceResponse.xsd
$sourceNamespaces:
  b: http://schemas.microsoft.com/BizTalk/2003
  cbt: http://CommonDocTemplates.CommonBaseTypes
  ns0: http://CommonDocTemplates.CommonAdvancedShipNotice
  xs: http://www.w3.org/2001/XMLSchema
$targetNamespaces:
  b: http://schemas.microsoft.com/BizTalk/2003
  cbt: http://CommonDocTemplates.CommonBaseTypes
  ns0: http://Microsoft.Samples.BizTalk.WoodgroveBank.Schemas.CustomerServiceResponse
  xs: http://www.w3.org/2001/XMLSchema
ns0:CustomerServiceResponse:
  $@RequestID: /ns0:Root/InputMessagePart_0/CustomerServiceRequest/@RequestID
  $@RequestSource: /ns0:Root/InputMessagePart_0/CustomerServiceRequest/@RequestSource
  $@RequestType: /ns0:Root/InputMessagePart_0/CustomerServiceRequest/@RequestType
  Customer:
    $@Name: if-then-else(is-equal(/ns0:Root/InputMessagePart_0/CustomerServiceRequest/Body/AuthenticationInfo/DataElementName, "CustomerName"), /ns0:Root/InputMessagePart_0/CustomerServiceRequest/Body/AuthenticationInfo/DataElementValue, null)
    AccountNumber: /ns0:Root/InputMessagePart_0/CustomerServiceRequest/Body/AccountNumber
  Account:
    $@CashAdvanceLimitAmount: if-then-else(is-equal("08", /ns0:Root/InputMessagePart_1/BAPI_BANKACCT_GET_DETAIL_Response/T_LIMIT/LIMTYPE), /ns0:Root/InputMessagePart_1/BAPI_BANKACCT_GET_DETAIL_Response/T_LIMIT/LIMSUM, null)
    $@CreditAccountBalance: add(subtract(if-then-else(is-equal("02", /ns0:Root/InputMessagePart_1/BAPI_BANKACCT_GET_DETAIL_Response/T_LIMIT/LIMTYPE), /ns0:Root/InputMessagePart_1/BAPI_BANKACCT_GET_DETAIL_Response/T_LIMIT/LIMSUM, null), /ns0:* Scripting functoid - manual translation required *), /ns0:* Scripting functoid - manual translation required *)
    $@CreditLimit: if-then-else(is-equal("02", /ns0:Root/InputMessagePart_1/BAPI_BANKACCT_GET_DETAIL_Response/T_LIMIT/LIMTYPE), /ns0:Root/InputMessagePart_1/BAPI_BANKACCT_GET_DETAIL_Response/T_LIMIT/LIMSUM, null)
    $@TotalLastPaymentAmount: /* Scripting functoid - manual translation required */
    $@TotalPendingTransactionAmount: /* Scripting functoid - manual translation required */
  ResponseStatus:
    $@Result: /* Scripting functoid - manual translation required */
    Error:
      $@ErrorDescription: concat("")
      $@ErrorSource: concat("")
      SAPError:
        $@ErrorDescription: concat("")
        $@ErrorNumber: concat("")
        $@ErrorSource: concat("")
      PaymentTrackingError:
        $@ErrorDescription: concat("")
        $@ErrorNumber: concat("")
        $@ErrorSource: concat("")
      PendingTransactionsError:
        $@ErrorDescription: concat("")
        $@ErrorNumber: concat("")
        $@ErrorSource: concat("")
