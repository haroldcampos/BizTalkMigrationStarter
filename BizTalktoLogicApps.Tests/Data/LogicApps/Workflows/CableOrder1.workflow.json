{
  "kind": "Stateful",
  "definition": {
    "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#",
    "contentVersion": "1.0.0.0",
    "triggers": {
      "DefaultReceiveLocation": {
        "type": "Request",
        "kind": "Http"
      }
    },
    "actions": {
      "ActivityID": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "ActivityID",
              "type": "string",
              "value": ""
            }
          ]
        },
        "runAfter": {}
      },
      "serviceType": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "serviceType",
              "type": "string",
              "value": ""
            }
          ]
        },
        "runAfter": {
          "ActivityID": [
            "SUCCEEDED"
          ]
        }
      },
      "orderHandler": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "orderHandler",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "serviceType": [
            "SUCCEEDED"
          ]
        }
      },
      "routingInfo": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "routingInfo",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "orderHandler": [
            "SUCCEEDED"
          ]
        }
      },
      "configData": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "configData",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "routingInfo": [
            "SUCCEEDED"
          ]
        }
      },
      "ReturnValue": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "ReturnValue",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "configData": [
            "SUCCEEDED"
          ]
        }
      },
      "Reason": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "Reason",
              "type": "string",
              "value": ""
            }
          ]
        },
        "runAfter": {
          "ReturnValue": [
            "SUCCEEDED"
          ]
        }
      },
      "ParameterArray": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "ParameterArray",
              "type": "array",
              "value": []
            }
          ]
        },
        "runAfter": {
          "Reason": [
            "SUCCEEDED"
          ]
        }
      },
      "MethodName": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "MethodName",
              "type": "string",
              "value": ""
            }
          ]
        },
        "runAfter": {
          "ParameterArray": [
            "SUCCEEDED"
          ]
        }
      },
      "CalledObject": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "CalledObject",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "MethodName": [
            "SUCCEEDED"
          ]
        }
      },
      "ObjectType": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "ObjectType",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "CalledObject": [
            "SUCCEEDED"
          ]
        }
      },
      "XmlOrderMsg": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "XmlOrderMsg",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "ObjectType": [
            "SUCCEEDED"
          ]
        }
      },
      "CompletionMsg": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "CompletionMsg",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "XmlOrderMsg": [
            "SUCCEEDED"
          ]
        }
      },
      "OrderMsg": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "OrderMsg",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "CompletionMsg": [
            "SUCCEEDED"
          ]
        }
      },
      "AckMsg": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "AckMsg",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "OrderMsg": [
            "SUCCEEDED"
          ]
        }
      },
      "InterruptMsg": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "InterruptMsg",
              "type": "object",
              "value": null
            }
          ]
        },
        "runAfter": {
          "AckMsg": [
            "SUCCEEDED"
          ]
        }
      },
      "TerminatedMsg": {
        "type": "InitializeVariable",
        "inputs": {
          "variables": [
            {
              "name": "TerminatedMsg",
              "type": "string",
              "value": ""
            }
          ]
        },
        "runAfter": {
          "InterruptMsg": [
            "SUCCEEDED"
          ]
        }
      },
      "GlobalScope": {
        "type": "Scope",
        "actions": {
          "OrderCorrelation": {
            "type": "Compose",
            "inputs": "@'// Unhandled shape type: CorrelationDeclaration'",
            "runAfter": {}
          },
          "SeqNumCorrelation": {
            "type": "Compose",
            "inputs": "@'// Unhandled shape type: CorrelationDeclaration'",
            "runAfter": {
              "OrderCorrelation": [
                "SUCCEEDED"
              ]
            }
          },
          "Assign_Address": {
            "type": "Compose",
            "inputs": "@'StageCompletionPort(Microsoft.XLANGs.BaseTypes.Address) = OrderMgrMsg.RoutingPart.OrderMgrReturnAddress'",
            "runAfter": {
              "SeqNumCorrelation": [
                "SUCCEEDED"
              ]
            }
          },
          "Construct_Ack__OrderMsg_9e5f8194": {
            "type": "Scope",
            "actions": {
              "Get_OrderMsg": {
                "type": "Compose",
                "inputs": "@'OrderMsg = (System.Xml.XmlDocument)OrderMgrMsg.OrderPart'",
                "runAfter": {}
              },
              "Assign_Ack": {
                "type": "Compose",
                "inputs": "@'Set message properties'",
                "runAfter": {
                  "Get_OrderMsg": [
                    "SUCCEEDED"
                  ]
                }
              }
            },
            "runAfter": {
              "Assign_Address": [
                "SUCCEEDED"
              ]
            }
          },
          "TRACE": {
            "type": "Compose",
            "inputs": "@'System.Diagnostics.Debug.WriteLine( \"\\n<CABLEORDER1>\\n\" );\r\nSystem.Diagnostics.Debug.WriteLine( \"   Req ID   : \" + OrderMsg.RequestID );\r\nSystem.Diagnostics.Debug.WriteLine( \"   Customer : \" + OrderMsg.CustNum );\r\nSystem.Diagnostics.Debug.WriteLine( \"   Order    : \" + OrderMsg.OrderNum );\r\nSystem.Diagnostics.Debug.WriteLine( \"   Sequence : \" + System.Convert.ToString( OrderMsg.OrderSeqNum ) );\r\nSystem.Diagnostics.Debug.WriteLine( \"\\n</CABLEORDER1>\\n\" )'",
            "runAfter": {
              "Construct_Ack__OrderMsg_9e5f8194": [
                "SUCCEEDED"
              ]
            }
          },
          "BAM_Start": {
            "type": "Compose",
            "inputs": "@'// [BAM] Start collecting BAM data [ServiceOrderRequest]\r\n\r\nActivityID = Microsoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.StartCollecting(OrderMsg.RequestID)'",
            "runAfter": {
              "TRACE": [
                "SUCCEEDED"
              ]
            }
          },
          "Send_Ack": {
            "type": "Http",
            "inputs": {
              "method": "POST",
              "uri": "http://localhost/service",
              "body": "@triggerBody()",
              "headers": {
                "Content-Type": "application/json"
              }
            },
            "runAfter": {
              "BAM_Start": [
                "SUCCEEDED"
              ]
            }
          },
          "Save_RoutingInfo": {
            "type": "Compose",
            "inputs": "@'routingInfo = OrderMgrMsg.RoutingPart'",
            "runAfter": {
              "Send_Ack": [
                "SUCCEEDED"
              ]
            }
          },
          "Business_Processing": {
            "type": "Scope",
            "actions": {
              "BAM_Begin_Order": {
                "type": "Compose",
                "inputs": "@'// [BAM] Update Activity [Service Order Request] with [Begin Order]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.BeginOrder(\r\n                ActivityID,              // Activity ID\r\n                OrderMsg.CustNum,        // Customer ID\r\n                OrderMsg.OrderNum,       // Order ID\r\n                OrderMsg.OrderSeqNum,    // Order Sequence #\r\n                OrderMsg.OrderTypeCode); // Service Type'",
                "runAfter": {}
              },
              "Create_OrderHandler_Scope": {
                "type": "Scope",
                "actions": {
                  "Calling_Code_Scope_Get_Config": {
                    "type": "Scope",
                    "actions": {
                      "Get_Config_Data": {
                        "type": "Compose",
                        "inputs": "@'configData = Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.SsoConfigHelper.Singleton'",
                        "runAfter": {}
                      },
                      "Catch_Exception": {
                        "type": "Scope",
                        "actions": {
                          "Initial_Exception": {
                            "type": "Compose",
                            "inputs": "@'Ex = CodeEx;\r\nCalledObject = null;\r\nObjectType = System.Type.GetType(\"Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.SSOConfigHelper\");\r\nReason = \"Read SSO failed\";\r\nMethodName = \"Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.SSOConfigHelper.Singleton\";\r\nParameterArray = null;\r\nReturnValue = null'",
                            "runAfter": {}
                          },
                          "Construct_XmlOrderMsg_eb82dff3": {
                            "type": "Compose",
                            "inputs": "@'XmlOrderMsg = OrderMsg'",
                            "runAfter": {
                              "Initial_Exception": [
                                "SUCCEEDED"
                              ]
                            }
                          },
                          "Call_Exception_Handler": {
                            "type": "Workflow",
                            "inputs": {
                              "host": {
                                "workflow": {
                                  "id": "ExceptionHandlerOrch"
                                }
                              },
                              "body": {
                                "message": "@triggerBody()"
                              }
                            },
                            "runAfter": {
                              "Construct_XmlOrderMsg_eb82dff3": [
                                "SUCCEEDED"
                              ]
                            }
                          },
                          "Get_Config_Data_1": {
                            "type": "Compose",
                            "inputs": "@'configData = (Microsoft.Samples.BizTalk.SouthridgeVideo.Utilities.SsoConfigHelper)ReturnValue'",
                            "runAfter": {
                              "Call_Exception_Handler": [
                                "SUCCEEDED"
                              ]
                            }
                          }
                        },
                        "runAfter": {
                          "Get_Config_Data": [
                            "FAILED",
                            "TIMEDOUT",
                            "SKIPPED"
                          ]
                        }
                      }
                    },
                    "runAfter": {}
                  },
                  "Calling_Code_Scope_OrderHandler": {
                    "type": "Scope",
                    "actions": {
                      "Create_OrderHandler": {
                        "type": "Compose",
                        "inputs": "@'orderHandler = new Microsoft.Samples.BizTalk.SouthridgeVideo.CableProvisioningSystem.OrderHandlerWrapper( configData.CableProvisioningSystemLocation )'",
                        "runAfter": {}
                      },
                      "Catch_Exception_1": {
                        "type": "Scope",
                        "actions": {
                          "Initial_Exception_1": {
                            "type": "Compose",
                            "inputs": "@'Ex = CodeEx;\r\nCalledObject = null;\r\nObjectType = System.Type.GetType(\"Microsoft.Samples.BizTalk.SouthridgeVideo.CableProvisioningSystem.OrderHandlerWrapper\");\r\nReason = \"Construction Failed\";\r\nMethodName = System.String.Empty;\r\nParameterArray = System.Array.CreateInstance(typeof(System.Object), 1);\r\nParameterArray.SetValue(configData.CableProvisioningSystemLocation, 0);\r\nReturnValue = null'",
                            "runAfter": {}
                          },
                          "Construct_XmlOrderMsg_dbbed3e9": {
                            "type": "Compose",
                            "inputs": "@'XmlOrderMsg = OrderMsg'",
                            "runAfter": {
                              "Initial_Exception_1": [
                                "SUCCEEDED"
                              ]
                            }
                          },
                          "Call_Exception_Handler_1": {
                            "type": "Workflow",
                            "inputs": {
                              "host": {
                                "workflow": {
                                  "id": "ExceptionHandlerOrch"
                                }
                              },
                              "body": {
                                "message": "@triggerBody()"
                              }
                            },
                            "runAfter": {
                              "Construct_XmlOrderMsg_dbbed3e9": [
                                "SUCCEEDED"
                              ]
                            }
                          },
                          "Get_OrderHandler": {
                            "type": "Compose",
                            "inputs": "@'orderHandler = (Microsoft.Samples.BizTalk.SouthridgeVideo.CableProvisioningSystem.OrderHandlerWrapper)ReturnValue'",
                            "runAfter": {
                              "Call_Exception_Handler_1": [
                                "SUCCEEDED"
                              ]
                            }
                          }
                        },
                        "runAfter": {
                          "Create_OrderHandler": [
                            "FAILED",
                            "TIMEDOUT",
                            "SKIPPED"
                          ]
                        }
                      }
                    },
                    "runAfter": {
                      "Calling_Code_Scope_Get_Config": [
                        "SUCCEEDED"
                      ]
                    }
                  }
                },
                "runAfter": {
                  "BAM_Begin_Order": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Check_Validity": {
                "type": "Scope",
                "actions": {
                  "Call_Validate": {
                    "type": "Workflow",
                    "inputs": {
                      "host": {
                        "workflow": {
                          "id": "ValidateOrch"
                        }
                      },
                      "body": {
                        "message": "@triggerBody()"
                      }
                    },
                    "runAfter": {}
                  },
                  "BAM_Validated": {
                    "type": "Compose",
                    "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [ActivatedService]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.Validated( ActivityID )'",
                    "runAfter": {
                      "Call_Validate": [
                        "SUCCEEDED"
                      ]
                    }
                  },
                  "Call_Analyze": {
                    "type": "Workflow",
                    "inputs": {
                      "host": {
                        "workflow": {
                          "id": "AnalyzeOrch"
                        }
                      },
                      "body": {
                        "message": "@triggerBody()"
                      }
                    },
                    "runAfter": {
                      "BAM_Validated": [
                        "SUCCEEDED"
                      ]
                    }
                  },
                  "BAM_Analyzed": {
                    "type": "Compose",
                    "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [ActivatedService]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.Analyzed( ActivityID )'",
                    "runAfter": {
                      "Call_Analyze": [
                        "SUCCEEDED"
                      ]
                    }
                  }
                },
                "runAfter": {
                  "Create_OrderHandler_Scope": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Check_Interrupt": {
                "type": "Workflow",
                "inputs": {
                  "host": {
                    "workflow": {
                      "id": "CheckInterruptOrch"
                    }
                  },
                  "body": {
                    "message": "@triggerBody()"
                  }
                },
                "runAfter": {
                  "Check_Validity": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Handle_Order_Request": {
                "type": "Scope",
                "actions": {
                  "Which_Service_Type_99eaabe9": {
                    "type": "If",
                    "expression": "@equals('S', variables('OrderMsg')?['ServiceClass'])",
                    "actions": {
                      "Set_ServiceType_1ef751e8": {
                        "type": "Compose",
                        "inputs": "@'serviceType = \"STANDARD\"'",
                        "runAfter": {}
                      }
                    },
                    "else": {
                      "actions": {
                        "Set_ServiceType_f1213bb8": {
                          "type": "Compose",
                          "inputs": "@'serviceType = \"DELUXE\"'",
                          "runAfter": {}
                        }
                      }
                    },
                    "runAfter": {}
                  },
                  "Which_Action_c3d5e842": {
                    "type": "If",
                    "expression": "@equals(variables('OrderMsg')?['OrderType'], 'ACTIVATE')",
                    "actions": {
                      "Call_Activate_ab595787": {
                        "type": "Workflow",
                        "inputs": {
                          "host": {
                            "workflow": {
                              "id": "ActivateOrch"
                            }
                          },
                          "body": {
                            "message": "@triggerBody()"
                          }
                        },
                        "runAfter": {}
                      },
                      "BAM_Activated_1c523dd4": {
                        "type": "Compose",
                        "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [ActivatedService]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.ActivatedService( ActivityID )'",
                        "runAfter": {
                          "Call_Activate_ab595787": [
                            "SUCCEEDED"
                          ]
                        }
                      }
                    },
                    "else": {
                      "actions": {
                        "Call_Change_e1317450": {
                          "type": "Workflow",
                          "inputs": {
                            "host": {
                              "workflow": {
                                "id": "ChangeOrch"
                              }
                            },
                            "body": {
                              "message": "@triggerBody()"
                            }
                          },
                          "runAfter": {}
                        },
                        "BAM_Changed_1bd08360": {
                          "type": "Compose",
                          "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [ChangedService]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.ChangedService( ActivityID )'",
                          "runAfter": {
                            "Call_Change_e1317450": [
                              "SUCCEEDED"
                            ]
                          }
                        }
                      }
                    },
                    "runAfter": {
                      "Which_Service_Type_99eaabe9": [
                        "SUCCEEDED"
                      ]
                    }
                  }
                },
                "runAfter": {
                  "Check_Interrupt": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Check_Interrupt_1": {
                "type": "Workflow",
                "inputs": {
                  "host": {
                    "workflow": {
                      "id": "CheckInterruptOrch"
                    }
                  },
                  "body": {
                    "message": "@triggerBody()"
                  }
                },
                "runAfter": {
                  "Handle_Order_Request": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Send_To_Facilities": {
                "type": "Http",
                "inputs": {
                  "method": "POST",
                  "uri": "http://localhost/service",
                  "body": "@triggerBody()",
                  "headers": {
                    "Content-Type": "application/json"
                  }
                },
                "runAfter": {
                  "Check_Interrupt_1": [
                    "SUCCEEDED"
                  ]
                }
              },
              "BAM_FNotification": {
                "type": "Compose",
                "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [FacilityNotified]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.FacilityNotified( ActivityID )'",
                "runAfter": {
                  "Send_To_Facilities": [
                    "SUCCEEDED"
                  ]
                }
              },
              "From_Facilities": {
                "type": "Compose",
                "inputs": "// Unmapped: Response Receive response from FacilitiesResponsePort (BizTalk correlation pattern - requires manual configuration)",
                "runAfter": {
                  "BAM_FNotification": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Interrupted": {
                "type": "Compose",
                "inputs": "// Unmapped: Response Receive response from InterruptPort (BizTalk correlation pattern - requires manual configuration)",
                "runAfter": {
                  "BAM_FNotification": [
                    "SUCCEEDED"
                  ]
                }
              },
              "BAM_FResponse": {
                "type": "Compose",
                "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [FacilityResponded]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.FacilityResponded( ActivityID )'",
                "runAfter": {
                  "BAM_FNotification": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Interrupted_1": {
                "type": "Http",
                "inputs": {
                  "method": "POST",
                  "uri": "http://localhost/service",
                  "body": "@triggerBody()",
                  "headers": {
                    "Content-Type": "application/json"
                  }
                },
                "runAfter": {
                  "BAM_FNotification": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Throw_InterruptEx": {
                "type": "Terminate",
                "inputs": {
                  "runStatus": "Failed",
                  "runError": {
                    "code": "Terminated",
                    "message": ""
                  }
                },
                "runAfter": {
                  "BAM_FNotification": [
                    "SUCCEEDED"
                  ]
                }
              },
              "From_Facilities_1": {
                "type": "Compose",
                "inputs": "// Unmapped: Response Receive response from FacilitiesResponsePort (BizTalk correlation pattern - requires manual configuration)",
                "runAfter": {
                  "BAM_FNotification": [
                    "SUCCEEDED"
                  ]
                }
              },
              "BAM_FResponse_1": {
                "type": "Compose",
                "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [FacilityResponded]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.FacilityResponded( ActivityID )'",
                "runAfter": {
                  "From_Facilities_1": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Interrupted_2": {
                "type": "Compose",
                "inputs": "// Unmapped: Response Receive response from InterruptPort (BizTalk correlation pattern - requires manual configuration)",
                "runAfter": {
                  "BAM_FNotification": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Interrupted_3": {
                "type": "Http",
                "inputs": {
                  "method": "POST",
                  "uri": "http://localhost/service",
                  "body": "@triggerBody()",
                  "headers": {
                    "Content-Type": "application/json"
                  }
                },
                "runAfter": {
                  "Interrupted_2": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Throw_InterruptEx_1": {
                "type": "Terminate",
                "inputs": {
                  "runStatus": "Failed",
                  "runError": {
                    "code": "Terminated",
                    "message": ""
                  }
                },
                "runAfter": {
                  "Interrupted_3": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Interruptible_Receive_Join": {
                "type": "Compose",
                "inputs": {
                  "parallelBranchesCompleted": true,
                  "branchCount": 7
                },
                "runAfter": {
                  "From_Facilities": [
                    "SUCCEEDED"
                  ],
                  "Interrupted": [
                    "SUCCEEDED"
                  ],
                  "BAM_FResponse": [
                    "SUCCEEDED"
                  ],
                  "Interrupted_1": [
                    "SUCCEEDED"
                  ],
                  "Throw_InterruptEx": [
                    "SUCCEEDED"
                  ],
                  "BAM_FResponse_1": [
                    "SUCCEEDED"
                  ],
                  "Throw_InterruptEx_1": [
                    "SUCCEEDED"
                  ]
                }
              }
            },
            "runAfter": {
              "Save_RoutingInfo": [
                "SUCCEEDED"
              ]
            }
          },
          "Construct_CompletionMsg_07e8e2b8": {
            "type": "Compose",
            "inputs": "@'CompletionMsg = OrderMgrMsg;\r\nCompletionMsg.OrderPart = (System.Xml.XmlDocument)OrderMsg'",
            "runAfter": {
              "Business_Processing": [
                "SUCCEEDED"
              ]
            }
          },
          "Continue_Processing": {
            "type": "Http",
            "inputs": {
              "method": "POST",
              "uri": "http://localhost/service",
              "body": "@triggerBody()",
              "headers": {
                "Content-Type": "application/json"
              }
            },
            "runAfter": {
              "Construct_CompletionMsg_07e8e2b8": [
                "SUCCEEDED"
              ]
            }
          },
          "Catch_Interrupt_Exception": {
            "type": "Scope",
            "actions": {
              "Log_Error": {
                "type": "Compose",
                "inputs": "@'PostWarning( \"CableOrder1 terminated because: Interrupted\" )'",
                "runAfter": {}
              },
              "BAM_Terminate": {
                "type": "Compose",
                "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [Terminated]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.Terminated( ActivityID );\r\n\r\n// [BAM] Update Activity [Service Order Request] with [Error]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.ErrorOccurred( ActivityID, \"CableOrder1 Interrupted\" )'",
                "runAfter": {
                  "Log_Error": [
                    "SUCCEEDED"
                  ]
                }
              },
              "BAM_End": {
                "type": "Compose",
                "inputs": "@'// [BAM] End collecting BAM data [ServiceOrderRequest]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.EndCollecting( ActivityID )'",
                "runAfter": {
                  "BAM_Terminate": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Terminate": {
                "type": "Terminate",
                "inputs": {
                  "runStatus": "Failed",
                  "runError": {
                    "code": "Terminated",
                    "message": "\"Interrupted\";\r\n"
                  }
                },
                "runAfter": {
                  "BAM_End": [
                    "SUCCEEDED"
                  ]
                }
              }
            },
            "runAfter": {
              "Continue_Processing": [
                "FAILED",
                "TIMEDOUT",
                "SKIPPED"
              ]
            }
          },
          "Catch_Exceptions": {
            "type": "Scope",
            "actions": {
              "Log_Error_1": {
                "type": "Compose",
                "inputs": "@concat('PostError( \"CableOrder1 terminated because: \"', 'Exception message')",
                "runAfter": {}
              },
              "BAM_Terminate_1": {
                "type": "Compose",
                "inputs": "@'// [BAM] Update Activity [ServiceorderRequest] with [Terminated]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.Terminated( ActivityID );\r\n\r\n// [BAM] Update Activity [Service Order Request] with [Error]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.ErrorOccurred( ActivityID, globalEx.Message )'",
                "runAfter": {
                  "Log_Error_1": [
                    "SUCCEEDED"
                  ]
                }
              },
              "BAM_End_1": {
                "type": "Compose",
                "inputs": "@'// [BAM] End collecting BAM data [ServiceOrderRequest]\r\n\r\nMicrosoft.Samples.BizTalk.SouthridgeVideo.ServiceLevelTracking.ServiceOrderRequest.EndCollecting( ActivityID )'",
                "runAfter": {
                  "BAM_Terminate_1": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Construct_TerminatedMsg_42d26ed5": {
                "type": "Compose",
                "inputs": "@'TerminatedMsg = new Microsoft.Samples.BizTalk.SouthridgeVideo.SchemaClasses.Terminated();\r\nTerminatedMsg.CustomerID = OrderMgrMsg.RoutingPart.CustomerID;\r\nTerminatedMsg.OrderID = OrderMgrMsg.RoutingPart.OrderID;\r\nTerminatedMsg.Status = globalEx.Message'",
                "runAfter": {
                  "BAM_End_1": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Send_TerminatedMsg": {
                "type": "Http",
                "inputs": {
                  "method": "POST",
                  "uri": "http://localhost/service",
                  "body": "@triggerBody()",
                  "headers": {
                    "Content-Type": "application/json"
                  }
                },
                "runAfter": {
                  "Construct_TerminatedMsg_42d26ed5": [
                    "SUCCEEDED"
                  ]
                }
              },
              "Terminate_1": {
                "type": "Terminate",
                "inputs": {
                  "runStatus": "Failed",
                  "runError": {
                    "code": "Terminated",
                    "message": "\"Exception thrown in CableOrder1: \" + globalEx.Message;"
                  }
                },
                "runAfter": {
                  "Send_TerminatedMsg": [
                    "SUCCEEDED"
                  ]
                }
              }
            },
            "runAfter": {
              "Continue_Processing": [
                "FAILED",
                "TIMEDOUT",
                "SKIPPED"
              ]
            }
          }
        },
        "runAfter": {
          "TerminatedMsg": [
            "SUCCEEDED"
          ]
        }
      },
      "DefaultSendPort": {
        "type": "ServiceProvider",
        "inputs": {
          "parameters": {
            "entityName": "queue",
            "message": "@triggerBody()",
            "sessionId": "",
            "contentType": "application/json"
          },
          "serviceProviderConfiguration": {
            "connectionName": "servicebus",
            "operationId": "sendMessage",
            "serviceProviderId": "/serviceProviders/serviceBus"
          }
        },
        "runAfter": {
          "GlobalScope": [
            "SUCCEEDED"
          ]
        }
      }
    },
    "outputs": {}
  }
}